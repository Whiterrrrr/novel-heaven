<template>
<!-- ======= 标题 ======= -->
<h1 class="dashboard-title">Author Dashboard</h1>

<!-- ======= 作者名 ======= -->
<div class="author-name-section">
  <span class="author-name-label">Author Name:</span>

  <!-- 已确认: 仅显示文本；未确认: 输入 + 保存 -->
  <template v-if="authorNameConfirmed">
    <span class="author-name-text">{{ authorName }}</span>
  </template>
  <template v-else>
    <input
      v-model="tempName"
      maxlength="7"
      class="author-name-input"
      placeholder="Enter pen name (≤7)"
    />
    <button class="save-btn" @click="confirmAuthorName">Save</button>
  </template>
</div>

<!-- ——— Coins Received 紧贴 Author Name 下方 ——— -->
        <div class="author-field coins-field">
          <strong>Coins&nbsp;Received:</strong>
          <span>{{ coinBalance }}</span>
          <!-- coin SVG Icon (18×18) -->
           <svg t ="1745994966071" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="18" style="margin-left:6px; vertical-align:middle;"><path d="M615.153509 10.394566c33.038491 6.762264 65.091623 16.712453 96.140076 29.850566a509.729811 509.729811 0 0 1 86.982038 47.219925c27.242264 18.393358 52.494491 39.221132 75.756679 62.502641a511.256151 511.256151 0 0 1 62.502641 75.756679 509.729811 509.729811 0 0 1 47.219925 86.982038c13.138113 31.048453 23.088302 63.101585 29.850566 96.140076 6.936151 33.888604 10.394566 68.279547 10.394566 103.153509 0 34.873962-3.458415 69.264906-10.394566 103.153509-6.762264 33.038491-16.712453 65.091623-29.850566 96.140076a508.390883 508.390883 0 0 1-47.219925 86.982038c-18.393358 27.242264-39.221132 52.494491-62.502641 75.756679a511.256151 511.256151 0 0 1-75.756679 62.502641 509.729811 509.729811 0 0 1-86.982038 47.219925 506.999789 506.999789 0 0 1-96.140076 29.850566C581.264906 1020.541585 546.873962 1024 512 1024c-34.873962 0-69.264906-3.458415-103.153509-10.394566-33.038491-6.762264-65.091623-16.712453-96.140076-29.850566a509.729811 509.729811 0 0 1-86.982038-47.219925c-27.242264-18.393358-52.494491-39.221132-75.756679-62.502641a511.256151 511.256151 0 0 1-62.502641-75.756679 509.729811 509.729811 0 0 1-47.219925-86.982038 507.001721 507.001721 0 0 1-29.850566-96.140076C3.458415 581.264906 0 546.873962 0 512c0-34.873962 3.458415-69.264906 10.394566-103.153509 6.762264-33.038491 16.712453-65.091623 29.850566-96.140076a509.729811 509.729811 0 0 1 47.219925-86.982038c18.393358-27.242264 39.221132-52.494491 62.502641-75.756679a511.256151 511.256151 0 0 1 75.756679-62.502641 509.729811 509.729811 0 0 1 86.982038-47.219925c31.048453-13.138113 63.101585-23.088302 96.140076-29.850566C442.735094 3.458415 477.126038 0 512 0c34.873962 0 69.264906 3.458415 103.153509 10.394566zM335.273057 93.628377a452.439909 452.439909 0 0 0-77.109132 41.868076 453.728604 453.728604 0 0 0-67.216906 55.450566 453.728604 453.728604 0 0 0-55.450566 67.216906 452.439909 452.439909 0 0 0-41.868076 77.109132 451.740498 451.740498 0 0 0-26.450113 85.185207C61.034264 450.521358 57.962264 481.02883 57.962264 512s3.072 61.478642 9.216 91.541736c6.008755 29.270943 14.819019 57.672453 26.450113 85.185207a452.439909 452.439909 0 0 0 41.868076 77.109132 453.728604 453.728604 0 0 0 55.450566 67.216906 453.728604 453.728604 0 0 0 67.216906 55.450566 452.439909 452.439909 0 0 0 77.109132 41.868076 451.740498 451.740498 0 0 0 85.185207 26.450113c30.063094 6.144 60.570566 9.216 91.541736 9.216s61.478642-3.072 91.541736-9.216c29.270943-6.008755 57.672453-14.819019 85.185207-26.450113a452.439909 452.439909 0 0 0 77.109132-41.868076 453.728604 453.728604 0 0 0 67.216906-55.450566 453.728604 453.728604 0 0 0 55.450566-67.216906 452.439909 452.439909 0 0 0 41.868076-77.109132 451.303849 451.303849 0 0 0 26.450113-85.185207c6.144-30.063094 9.216-60.570566 9.216-91.541736s-3.072-61.478642-9.216-91.541736a451.740498 451.740498 0 0 0-26.450113-85.185207 452.439909 452.439909 0 0 0-41.868076-77.109132 453.728604 453.728604 0 0 0-55.450566-67.216906 453.728604 453.728604 0 0 0-67.216906-55.450566 452.439909 452.439909 0 0 0-77.109132-41.868076 451.303849 451.303849 0 0 0-85.185207-26.450113C573.478642 61.034264 542.97117 57.962264 512 57.962264s-61.478642 3.072-91.541736 9.216a451.740498 451.740498 0 0 0-85.185207 26.450113zM512 227.984906h205.012528c0.463698 0 0.946717 0.019321 1.410415 0.038641 0.483019 0.019321 0.946717 0.057962 1.429736 0.096604l1.410415 0.173887a35.036257 35.036257 0 0 1 2.782189 0.560302c0.463698 0.115925 0.927396 0.231849 1.371774 0.386415 0.463698 0.135245 0.908075 0.270491 1.352452 0.444377 0.444377 0.154566 0.888755 0.328453 1.333133 0.50234 0.425057 0.193208 0.869434 0.386415 1.29449 0.579622l1.27517 0.637585c0.405736 0.231849 0.830792 0.463698 1.236528 0.695547 0.405736 0.25117 0.811472 0.50234 1.197887 0.772831 0.386415 0.25117 0.77283 0.540981 1.159245 0.811471 0.386415 0.289811 0.753509 0.579623 1.120604 0.888755 0.367094 0.289811 0.734189 0.598943 1.081962 0.927396a24.191517 24.191517 0 0 1 2.009359 2.009359c0.328453 0.347774 0.637585 0.695547 0.927396 1.062641 0.309132 0.367094 0.598943 0.753509 0.869434 1.139925 0.289811 0.367094 0.560302 0.753509 0.830792 1.159245 0.25117 0.386415 0.52166 0.792151 0.75351 1.197887 0.25117 0.405736 0.483019 0.811472 0.714868 1.236528l0.637585 1.27517c0.193208 0.425057 0.386415 0.850113 0.560302 1.294491 0.193208 0.444377 0.367094 0.888755 0.52166 1.333132 0.154566 0.444377 0.309132 0.888755 0.444377 1.352452 0.135245 0.444377 0.270491 0.908075 0.386415 1.371774 0.115925 0.444377 0.212528 0.908075 0.309132 1.371774s0.173887 0.946717 0.23185 1.410415c0.077283 0.463698 0.135245 0.946717 0.173886 1.410415 0.057962 0.463698 0.096604 0.946717 0.115925 1.410415 0.019321 0.483019 0.038642 0.946717 0.038641 1.429736s-0.019321 0.946717-0.038641 1.429736c-0.019321 0.463698-0.057962 0.946717-0.115925 1.410415-0.038642 0.463698-0.096604 0.946717-0.173886 1.410415-0.057962 0.463698-0.135245 0.946717-0.23185 1.410415-0.096604 0.463698-0.193208 0.927396-0.309132 1.391094a35.501887 35.501887 0 0 1-0.830792 2.704906c-0.154566 0.444377-0.328453 0.888755-0.52166 1.333132-0.173887 0.444377-0.367094 0.869434-0.560302 1.294491-0.212528 0.444377-0.425057 0.850113-0.637585 1.275169-0.231849 0.425057-0.463698 0.830792-0.714868 1.236529-0.231849 0.405736-0.50234 0.811472-0.75351 1.197886-0.270491 0.405736-0.540981 0.792151-0.830792 1.178566-0.270491 0.367094-0.560302 0.753509-0.869434 1.120604-0.289811 0.367094-0.598943 0.714868-0.927396 1.062642-0.309132 0.367094-0.637585 0.695547-0.985359 1.04332-0.328453 0.328453-0.676226 0.656906-1.024 0.966038-0.347774 0.328453-0.714868 0.637585-1.081962 0.946717-0.367094 0.289811-0.734189 0.579623-1.120604 0.869434-0.386415 0.270491-0.77283 0.560302-1.159245 0.811472-0.386415 0.270491-0.792151 0.52166-1.197887 0.77283-0.405736 0.231849-0.830792 0.463698-1.236528 0.695547l-1.27517 0.637585c-0.425057 0.193208-0.869434 0.386415-1.29449 0.579623-0.444377 0.173887-0.888755 0.347774-1.333133 0.502339-0.444377 0.173887-0.888755 0.309132-1.352452 0.444378-0.444377 0.154566-0.908075 0.270491-1.371774 0.386415s-0.927396 0.212528-1.391094 0.309132-0.927396 0.173887-1.391095 0.25117l-1.410415 0.173887c-0.483019 0.038642-0.946717 0.077283-1.429736 0.096603-0.463698 0.019321-0.946717 0.038642-1.410415 0.038642H540.981132v71.757283c11.708377 1.062642 23.320151 2.762868 34.835321 5.12a315.063547 315.063547 0 0 1 113.335547 47.606339 319.217509 319.217509 0 0 1 46.891472 38.583548c14.393962 14.374642 27.280906 29.966491 38.66083 46.794868 11.51517 16.982943 21.25283 34.893283 29.232302 53.731018 8.134038 19.20483 14.297358 39.008604 18.489962 59.430642 4.289208 20.924377 6.433811 42.157887 6.433811 63.719849 0 0.463698-0.019321 0.946717-0.038641 1.410415-0.019321 0.483019-0.057962 0.946717-0.096604 1.429736l-0.173887 1.410415c-0.077283 0.463698-0.154566 0.927396-0.25117 1.391094s-0.193208 0.927396-0.309132 1.391095-0.231849 0.908075-0.386415 1.371773c-0.135245 0.444377-0.270491 0.908075-0.444377 1.352453-0.154566 0.444377-0.328453 0.888755-0.50234 1.333132-0.193208 0.425057-0.386415 0.869434-0.579622 1.294491l-0.637585 1.27517c-0.231849 0.405736-0.463698 0.830792-0.695547 1.236528-0.25117 0.405736-0.50234 0.792151-0.772831 1.197887-0.25117 0.386415-0.540981 0.77283-0.811471 1.159245-0.289811 0.386415-0.579623 0.753509-0.869434 1.120604-0.309132 0.367094-0.618264 0.734189-0.946717 1.081962a24.191517 24.191517 0 0 1-2.009359 2.009358c-0.347774 0.309132-0.695547 0.618264-1.062641 0.927397-0.367094 0.309132-0.753509 0.598943-1.120604 0.869434-0.386415 0.289811-0.77283 0.560302-1.178566 0.830792-0.386415 0.25117-0.792151 0.52166-1.197887 0.75351-0.405736 0.25117-0.811472 0.483019-1.236528 0.695547-0.425057 0.231849-0.830792 0.444377-1.27517 0.656905-0.425057 0.193208-0.850113 0.386415-1.294491 0.560302-0.444377 0.193208-0.888755 0.367094-1.333132 0.521661-0.444377 0.154566-0.888755 0.309132-1.352452 0.444377-0.444377 0.135245-0.908075 0.270491-1.352453 0.386415-0.463698 0.115925-0.927396 0.212528-1.391095 0.309132s-0.946717 0.173887-1.410415 0.231849c-0.463698 0.077283-0.946717 0.135245-1.410415 0.173887-0.463698 0.057962-0.946717 0.096604-1.410415 0.115925-0.483019 0.019321-0.946717 0.038642-1.429736 0.038641s-0.946717-0.019321-1.429736-0.038641c-0.463698-0.019321-0.946717-0.057962-1.410415-0.115925-0.463698-0.038642-0.946717-0.096604-1.410415-0.173887-0.463698-0.057962-0.946717-0.135245-1.410415-0.231849-0.463698-0.096604-0.927396-0.193208-1.371773-0.309132-0.463698-0.115925-0.927396-0.25117-1.371774-0.386415-0.463698-0.135245-0.908075-0.289811-1.352453-0.444377-0.444377-0.154566-0.888755-0.328453-1.333132-0.521661-0.444377-0.173887-0.869434-0.367094-1.29449-0.560302-0.425057-0.212528-0.850113-0.425057-1.27517-0.656905-0.425057-0.212528-0.830792-0.444377-1.236529-0.695547-0.405736-0.231849-0.811472-0.50234-1.197886-0.75351-0.405736-0.270491-0.792151-0.540981-1.178566-0.830792-0.367094-0.270491-0.753509-0.560302-1.120604-0.869434-0.367094-0.309132-0.714868-0.618264-1.062642-0.927397-0.347774-0.328453-0.695547-0.637585-1.04332-0.985358-0.328453-0.328453-0.656906-0.676226-0.966038-1.024-0.328453-0.347774-0.637585-0.714868-0.927396-1.081962-0.309132-0.367094-0.598943-0.734189-0.888755-1.120604-0.270491-0.386415-0.560302-0.77283-0.811472-1.159245-0.270491-0.405736-0.52166-0.792151-0.77283-1.197887-0.231849-0.405736-0.463698-0.830792-0.695547-1.236528l-0.637585-1.27517c-0.193208-0.425057-0.386415-0.869434-0.579623-1.294491-0.173887-0.444377-0.347774-0.888755-0.502339-1.333132-0.173887-0.444377-0.309132-0.908075-0.444378-1.352453-0.154566-0.463698-0.270491-0.908075-0.386415-1.371773s-0.212528-0.927396-0.309132-1.391095-0.173887-0.927396-0.25117-1.391094l-0.173887-1.410415c-0.038642-0.483019-0.077283-0.946717-0.096603-1.429736-0.019321-0.463698-0.038642-0.946717-0.038642-1.410415 0-17.639849-1.758189-34.989887-5.255245-52.088755a256.280151 256.280151 0 0 0-38.931321-92.295245 258.341675 258.341675 0 0 0-31.628075-38.255094 258.573525 258.573525 0 0 0-38.332378-31.570114c-13.910943-9.370566-28.556075-17.311396-43.974037-23.82249a256.902279 256.902279 0 0 0-71.795925-18.702491V790.218868c0 0.483019-0.019321 0.946717-0.038641 1.429736-0.019321 0.463698-0.057962 0.946717-0.096604 1.410415l-0.173887 1.410415c-0.077283 0.463698-0.154566 0.946717-0.25117 1.410415s-0.193208 0.927396-0.309132 1.391094c-0.115925 0.444377-0.231849 0.908075-0.386415 1.352453-0.135245 0.463698-0.270491 0.908075-0.444377 1.352453-0.154566 0.444377-0.328453 0.888755-0.50234 1.333132-0.193208 0.444377-0.386415 0.869434-0.579623 1.294491-0.212528 0.444377-0.425057 0.850113-0.637585 1.27517-0.231849 0.425057-0.463698 0.830792-0.695547 1.236528-0.25117 0.405736-0.50234 0.811472-0.77283 1.197887-0.25117 0.405736-0.540981 0.792151-0.811472 1.178566-0.289811 0.367094-0.579623 0.753509-0.869434 1.120603-0.309132 0.367094-0.618264 0.714868-0.946717 1.062642-0.309132 0.367094-0.637585 0.695547-0.966037 1.043321-0.347774 0.328453-0.676226 0.656906-1.043321 0.966037-0.347774 0.328453-0.695547 0.637585-1.062642 0.946717-0.367094 0.289811-0.753509 0.579623-1.120603 0.869434-0.386415 0.270491-0.77283 0.560302-1.178566 0.811472-0.386415 0.270491-0.792151 0.52166-1.197887 0.77283-0.405736 0.231849-0.811472 0.463698-1.236528 0.695547-0.425057 0.212528-0.830792 0.425057-1.27517 0.637585-0.425057 0.193208-0.850113 0.386415-1.294491 0.579623-0.444377 0.173887-0.888755 0.347774-1.333132 0.50234-0.444377 0.173887-0.888755 0.309132-1.352453 0.444377-0.444377 0.154566-0.908075 0.270491-1.352453 0.386415-0.463698 0.115925-0.927396 0.212528-1.391094 0.309132s-0.946717 0.173887-1.410415 0.25117l-1.410415 0.173887c-0.463698 0.038642-0.946717 0.077283-1.410415 0.096603-0.483019 0.019321-0.946717 0.038642-1.429736 0.038642s-0.946717-0.019321-1.429736-0.038642c-0.463698-0.019321-0.946717-0.057962-1.410415-0.096603l-1.410415-0.173887c-0.463698-0.077283-0.946717-0.154566-1.410415-0.25117s-0.927396-0.193208-1.371774-0.309132c-0.463698-0.115925-0.927396-0.231849-1.371773-0.386415-0.463698-0.135245-0.908075-0.270491-1.352453-0.444377-0.444377-0.154566-0.888755-0.328453-1.333132-0.50234-0.444377-0.193208-0.869434-0.386415-1.294491-0.579623l-1.27517-0.637585c-0.425057-0.231849-0.830792-0.463698-1.236528-0.695547-0.405736-0.25117-0.811472-0.50234-1.197887-0.77283-0.405736-0.25117-0.792151-0.540981-1.178566-0.811472-0.367094-0.289811-0.753509-0.579623-1.120603-0.869434-0.367094-0.309132-0.714868-0.618264-1.062642-0.946717-0.347774-0.309132-0.695547-0.637585-1.043321-0.966037-0.328453-0.347774-0.656906-0.676226-0.966037-1.043321a15.86234 15.86234 0 0 1-0.927397-1.062642c-0.309132-0.367094-0.598943-0.753509-0.888754-1.120603-0.270491-0.386415-0.560302-0.77283-0.811472-1.178566-0.270491-0.386415-0.52166-0.792151-0.77283-1.197887-0.231849-0.405736-0.463698-0.811472-0.695547-1.236528-0.212528-0.425057-0.425057-0.830792-0.637585-1.27517-0.193208-0.425057-0.386415-0.850113-0.579623-1.294491-0.173887-0.444377-0.347774-0.888755-0.50234-1.333132-0.173887-0.444377-0.309132-0.888755-0.444377-1.352453-0.154566-0.444377-0.270491-0.908075-0.386415-1.352453-0.115925-0.463698-0.212528-0.927396-0.309132-1.391094s-0.173887-0.946717-0.25117-1.410415l-0.173887-1.410415c-0.038642-0.463698-0.077283-0.946717-0.096604-1.410415-0.019321-0.483019-0.038642-0.946717-0.038641-1.429736V415.956528a256.902279 256.902279 0 0 0-71.795925 18.702491c-15.417962 6.511094-30.063094 14.451925-43.974037 23.82249a258.573525 258.573525 0 0 0-38.332378 31.570114c-11.78566 11.747019-22.315472 24.498717-31.628075 38.255094a256.370958 256.370958 0 0 0-38.931321 92.295245c-3.497057 17.098868-5.255245 34.448906-5.255245 52.088755 0 0.463698-0.019321 0.946717-0.038642 1.410415-0.019321 0.483019-0.057962 0.946717-0.096603 1.429736l-0.173887 1.410415c-0.077283 0.463698-0.154566 0.927396-0.25117 1.391094s-0.193208 0.927396-0.309132 1.391095-0.231849 0.908075-0.386415 1.371773c-0.135245 0.444377-0.270491 0.908075-0.444378 1.352453-0.154566 0.444377-0.328453 0.888755-0.502339 1.333132-0.193208 0.425057-0.386415 0.869434-0.579623 1.294491l-0.637585 1.27517c-0.231849 0.405736-0.463698 0.830792-0.695547 1.236528-0.25117 0.405736-0.50234 0.792151-0.77283 1.197887-0.25117 0.386415-0.540981 0.77283-0.811472 1.159245-0.289811 0.386415-0.579623 0.753509-0.869434 1.120604-0.309132 0.367094-0.618264 0.734189-0.946717 1.081962a24.191517 24.191517 0 0 1-2.009358 2.009358c-0.347774 0.309132-0.695547 0.618264-1.062642 0.927397-0.367094 0.309132-0.753509 0.598943-1.120604 0.869434-0.386415 0.289811-0.77283 0.560302-1.178566 0.830792-0.386415 0.25117-0.792151 0.52166-1.197886 0.75351-0.405736 0.25117-0.811472 0.483019-1.236529 0.695547-0.425057 0.231849-0.830792 0.444377-1.27517 0.656905-0.425057 0.193208-0.850113 0.386415-1.29449 0.560302-0.444377 0.193208-0.888755 0.367094-1.333132 0.521661-0.444377 0.154566-0.888755 0.309132-1.352453 0.444377-0.444377 0.135245-0.908075 0.270491-1.352453 0.386415-0.463698 0.115925-0.927396 0.212528-1.391094 0.309132s-0.946717 0.173887-1.410415 0.231849c-0.463698 0.077283-0.946717 0.135245-1.410415 0.173887-0.463698 0.057962-0.946717 0.096604-1.410415 0.115925-0.483019 0.019321-0.946717 0.038642-1.429736 0.038641-0.946717 0-1.893434-0.057962-2.840151-0.154566-0.946717-0.077283-1.874113-0.231849-2.82083-0.405736-0.927396-0.193208-1.835472-0.425057-2.743548-0.695547-0.908075-0.270491-1.816151-0.598943-2.685584-0.966038-0.869434-0.347774-1.738868-0.753509-2.569661-1.217207-0.830792-0.444377-1.661585-0.927396-2.434415-1.449057a28.069192 28.069192 0 0 1-4.405132-3.612981c-0.656906-0.676226-1.294491-1.371774-1.893434-2.105962-0.618264-0.734189-1.178566-1.487698-1.700226-2.279849-0.52166-0.792151-1.024-1.603623-1.468378-2.434415-0.444377-0.850113-0.850113-1.700226-1.217207-2.569661-0.367094-0.888755-0.676226-1.777509-0.946717-2.685585-0.289811-0.908075-0.52166-1.835472-0.695547-2.762868a27.94554 27.94554 0 0 1-0.560302-5.64166c0-21.561962 2.144604-42.795472 6.433811-63.719849a313.807698 313.807698 0 0 1 18.489962-59.430642 313.150792 313.150792 0 0 1 29.232302-53.731018c11.379925-16.828377 24.266868-32.420226 38.680151-46.794868 14.393962-14.355321 30.024453-27.222943 46.872151-38.583548a315.063547 315.063547 0 0 1 113.335547-47.606339c11.51517-2.357132 23.126943-4.057358 34.835321-5.12V285.94717h-176.031396c-0.463698 0-0.946717-0.019321-1.410415-0.038642-0.483019-0.019321-0.946717-0.057962-1.429736-0.096603l-1.410415-0.173887c-0.463698-0.077283-0.927396-0.154566-1.391095-0.25117s-0.927396-0.193208-1.391094-0.309132-0.927396-0.231849-1.371774-0.386415c-0.463698-0.135245-0.908075-0.270491-1.352452-0.444378-0.444377-0.154566-0.888755-0.328453-1.333133-0.502339-0.425057-0.193208-0.869434-0.386415-1.29449-0.579623l-1.27517-0.637585c-0.405736-0.231849-0.830792-0.463698-1.236528-0.695547-0.405736-0.25117-0.811472-0.50234-1.197887-0.77283-0.386415-0.25117-0.77283-0.540981-1.159245-0.811472-0.386415-0.289811-0.753509-0.579623-1.120604-0.869434-0.367094-0.309132-0.734189-0.618264-1.081962-0.946717-0.347774-0.309132-0.695547-0.637585-1.024-0.966038-0.347774-0.347774-0.676226-0.676226-0.985359-1.04332a15.86234 15.86234 0 0 1-0.927396-1.062642c-0.309132-0.367094-0.598943-0.753509-0.869434-1.120604-0.289811-0.386415-0.560302-0.77283-0.830792-1.178566-0.25117-0.386415-0.52166-0.792151-0.75351-1.197886-0.25117-0.405736-0.483019-0.811472-0.695547-1.236529-0.231849-0.425057-0.444377-0.830792-0.656906-1.275169-0.193208-0.425057-0.386415-0.850113-0.560302-1.294491-0.193208-0.444377-0.367094-0.888755-0.52166-1.333132-0.154566-0.444377-0.309132-0.888755-0.444377-1.352453-0.135245-0.444377-0.270491-0.908075-0.386415-1.352453-0.115925-0.463698-0.212528-0.927396-0.309132-1.391094s-0.173887-0.946717-0.23185-1.410415c-0.077283-0.463698-0.135245-0.946717-0.173886-1.410415-0.057962-0.463698-0.096604-0.946717-0.115925-1.410415-0.019321-0.483019-0.038642-0.946717-0.038641-1.429736s0.019321-0.946717 0.038641-1.429736c0.019321-0.463698 0.057962-0.946717 0.115925-1.410415 0.038642-0.463698 0.096604-0.946717 0.173886-1.410415 0.057962-0.463698 0.135245-0.946717 0.23185-1.410415 0.096604-0.463698 0.193208-0.927396 0.309132-1.371774 0.115925-0.463698 0.25117-0.927396 0.386415-1.371774 0.135245-0.463698 0.289811-0.908075 0.444377-1.352452 0.154566-0.444377 0.328453-0.888755 0.52166-1.333132 0.173887-0.444377 0.367094-0.869434 0.560302-1.294491 0.212528-0.425057 0.425057-0.850113 0.656906-1.27517 0.212528-0.425057 0.444377-0.830792 0.695547-1.236528 0.231849-0.405736 0.50234-0.811472 0.75351-1.197887 0.270491-0.405736 0.540981-0.792151 0.830792-1.159245 0.270491-0.386415 0.560302-0.77283 0.869434-1.139925 0.289811-0.367094 0.598943-0.714868 0.927396-1.062641a24.436891 24.436891 0 0 1 2.009359-2.009359c0.347774-0.328453 0.714868-0.637585 1.081962-0.927396 0.367094-0.309132 0.734189-0.598943 1.120604-0.888755 0.386415-0.270491 0.77283-0.560302 1.159245-0.811471 0.386415-0.270491 0.792151-0.52166 1.197887-0.772831 0.405736-0.231849 0.830792-0.463698 1.236528-0.695547l1.27517-0.637585c0.425057-0.193208 0.869434-0.386415 1.29449-0.579622 0.444377-0.173887 0.888755-0.347774 1.333133-0.50234 0.444377-0.173887 0.888755-0.309132 1.352452-0.444377 0.444377-0.154566 0.908075-0.270491 1.371774-0.386415s0.927396-0.212528 1.391094-0.309132 0.927396-0.173887 1.391095-0.25117l1.410415-0.173887c0.483019-0.038642 0.946717-0.077283 1.429736-0.096604 0.463698-0.019321 0.946717-0.038642 1.410415-0.038641z" p-id="5951"></path></svg>
    </div>

    <!-- ======= 我的作品 ======= -->
    <div class="my-works-section">
      <div class="works-title-area">
        <h2 class="works-title">My Works</h2>
        <button
          class="create-work-btn"
          @click="openCreateModal"
          :disabled="!authorNameConfirmed"
        >
          Create New Work
        </button>
      </div>

      <div v-if="works.length === 0" class="no-works-hint">
        No works yet, start creating!
      </div>

      <div class="works-list">
        <div v-for="work in works" :key="work.id" class="work-card">
          <!-- 封面 -->
          <img :src="work.cover" alt="cover" class="work-cover" />

          <!-- 左列：点赞 / 评论 / 状态 -->
          <div class="work-left-stats">
            <div class="stat-item">
  <!-- 新五角星图标 -->
  <span class="favorites-icon">
    <svg
      class="icon"
      viewBox="0 0 1024 1024"
      width="16"
      height="16"
      style="vertical-align: middle; margin-right: 4px;"
    >
      <!-- ⭐️ 五角星（金色） -->
      <path
        d="M512 64l149 302 333 48-241 235 57 332-298-157-298 157 57-332-241-235 333-48z"
        fill="#FFD700"
      />
    </svg>
  </span>
  <span>{{ work.likes }}</span>
</div>
            <div class="stat-item">
              <span class="comment-icon">🗩</span>
              <span>{{ work.commentsCount }}</span>
            </div>
            <div class="stat-item">Status: {{ work.status }}</div>
          </div>

          <!-- 中列：标题 / 简介 -->
          <div class="work-center">
            <h3 class="work-title">{{ work.title }}</h3>
            <p class="work-synopsis">{{ work.synopsis }}</p>
          </div>

          <!-- 右列：编辑按钮 -->
          <button
            class="edit-chapter-btn"
            @click="editChapters(work.id)"
            :disabled="!authorNameConfirmed"
          >
            Edit Chapters
          </button>
        </div>
      </div>
    

    <!-- ======= 最新评论 ======= -->
    <div class="comments-section">
      <h2 class="comments-title">Latest Comments</h2>
      <div class="comments-scroll">
        <ul>
          <li v-for="c in latestComments" :key="c.id">
            <strong>{{ c.reader }}:</strong> {{ c.content }}
            <small class="cmt-date">({{ c.date }})</small>
          </li>
        </ul>
      </div>
    </div>

    <!-- ======= 新建作品弹窗 ======= -->
    <CreateWork v-model:visible="showCreateModal" @created="refreshWorks" />
  </div>
</template>

<script>
/* ---------- 依赖 ---------- */
import axios from "axios";
import CreateWork from "@/views/CreateWork.vue";
import { useUserStore } from "@/store/index";

// 假封面图片
import DouLuoCover from "@/assets/斗罗大陆.jpg";
import DouPoCover from "@/assets/斗破苍穹.jpg";
import WanMeiCover from "@/assets/完美世界.jpg";

export default {
  name: "AuthorDashboard",
  components: { CreateWork },

  data() {
    return {
      /* —— 作者名相关 —— */
      authorName: "",
      authorNameConfirmed: false,
      tempName: "",

      /* —— 账户余额 —— */
      coinBalance: 0,

      /* —— 作品列表 —— */
      works: [
        {
          id: 101,
          title: "斗罗大陆",
          cover: DouLuoCover,
          synopsis: "唐三的异世之旅，宗门崛起的故事。",
          status: "Ongoing",
          likes: 520,
          commentsCount: 88,
        },
        {
          id: 102,
          title: "斗破苍穹",
          cover: DouPoCover,
          synopsis: "萧炎三十级斗者一朝变废？却机缘巧合重登巅峰！",
          status: "Ongoing",
          likes: 888,
          commentsCount: 120,
        },
        {
          id: 103,
          title: "完美世界",
          cover: WanMeiCover,
          synopsis: "石昊于蛮荒中崛起，追寻那传说中的完美之路。",
          status: "Finished",
          likes: 666,
          commentsCount: 95,
        },
      ],

      /* —— 最新评论 —— */
      latestComments: [
        /* CHANGE: 示例评论，可由后端覆盖 */
        {
          id: 1,
          reader: "Alice",
          content: "I really like your work!",
          date: "2025-05-01",
        },
        {
          id: 2,
          reader: "Bob",
          content: "Looking forward to the next chapter!",
          date: "2025-05-02",
        },
      ],

      /* —— 弹窗开关 —— */
      showCreateModal: false,
    };
  },

  created() {
    this.initAuthorInfo(); // CHANGE
    this.refreshWorks();
    this.fetchLatestComments(); // CHANGE
  },

  methods: {
    /* ---------- 初始化作者信息 ---------- */
    async initAuthorInfo() {
      try {
        const { data } = await axios.get("/api/author/me");
        this.authorName = data.authorName;
        this.authorNameConfirmed = !!data.authorName;
        this.coinBalance = data.coins ?? 0;
        this.tempName = data.authorName;
      } catch (e) {
        /* 如后端尚未实现，用本地存储兜底 */
        const localName = localStorage.getItem("authorName");
        this.authorName = localName || "";
        this.authorNameConfirmed = !!localName;
        this.tempName = localName;
        this.coinBalance =
          parseInt(localStorage.getItem("coinBalance") || "50", 10); // 默认50
      }
    },

    /* ---------- 保存笔名 ---------- */
    async confirmAuthorName() {
      if (!this.tempName.trim()) {
        alert("Pen name cannot be empty");
        return;
      }
      try {
        await axios.post("/api/author/name", {
          authorName: this.tempName.trim(),
        });
        this.authorName = this.tempName.trim();
        this.authorNameConfirmed = true;
      } catch {
        /* 本地兜底 */
        this.authorName = this.tempName.trim();
        this.authorNameConfirmed = true;
        localStorage.setItem("authorName", this.authorName); // CHANGE
      }
    },

    /* ---------- 进入章节编辑 ---------- */
    editChapters(workId) {
      this.$router.push({ name: "ChapterEditor", params: { workId } });
    },

    /* ---------- 打开弹窗 ---------- */
    openCreateModal() {
      this.showCreateModal = true;
    },

    /* ---------- 刷新作品列表 ---------- */
    async refreshWorks() {
      try {
        const { data } = await axios.get("/api/author/works");
        this.works = data;
      } catch (err) {
        // 使用默认假数据（保持现状）
      }
    },

    /* ---------- 获取最新评论 ---------- */
    async fetchLatestComments() {
      try {
        const { data } = await axios.get("/api/author/comments?limit=10");
        this.latestComments = data;
      } catch {
        /* 若接口还没实现，保持示例 */
      }
    },
  },
};
</script>

<style scoped>
/* —— 原有样式保持不变，仅加几个新选择器 —— */
.author-dashboard-container {
  background: #fffaf0;
  min-height: 100vh;
  padding: 3rem 2rem;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  flex-direction: column;
}

.dashboard-title {
  text-align: center;
  font-size: 2rem;
  color: #a8412a;
  margin-bottom: 1.5rem;
}

/* ---------- 作者名 + 余额 ---------- */
.author-name-section {
  text-align: center;
  margin-bottom: 1.5rem;
}

.author-name-label {
  font-size: 1.2rem;
  color: #a8412a;
  margin-right: 0.5rem;
}

.author-name-text {
  font-size: 1.2rem;
  font-weight: 600;
}

.author-name-input {
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  min-width: 180px;
}

.save-btn {
  margin-left: 0.5rem;
  background: #f05d37;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 0.5rem 0.8rem;
  cursor: pointer;
}

.save-btn:hover {
  background: #d35445;
}

.coin-balance {
  display: inline-block;
  margin-left: 1rem;
  color: #333;
}
/* === 新增 / 调整样式 === */
.author-name-section,
.coins-received-section {
  font-size: 1.05rem;       /* 与原“Author Name”一致 */
  line-height: 1.5;
  color: #333;
  margin-bottom: .25rem;    /* 两行紧贴，留少量间距 */
}

.coins-label {
  font-weight: 600;
}

.coin-icon {
  width: 18px;
  height: 18px;
  margin-left: 4px;
  vertical-align: middle;
  fill: currentColor;
}

/* ---------- 作品区 ---------- */
.my-works-section {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  padding: 1rem;
  overflow-y: auto;
}

.works-title-area {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.works-title {
  margin: 0;
  font-size: 1.4rem;
  color: #a8412a;
}

.create-work-btn {
  background: #f05d37;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  cursor: pointer;
}

.create-work-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
}

.create-work-btn:hover:not(:disabled) {
  background: #d35445;
}

.works-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.work-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: #fffcfa;
  border-radius: 6px;
  padding: 1rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.work-cover {
  width: 100px;
  height: 130px;
  object-fit: cover;
  border-radius: 4px;
}

/* stats column */
.work-left-stats {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  min-width: 80px;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  font-size: 0.9rem;
  color: #555;
}

.like-icon {
  color: #e74c3c;
  font-size: 1.1rem;
}

.comment-icon {
  font-size: 1.1rem;
}

/* center info */
.work-center {
  flex: 1;
  text-align: center;
}

.work-title {
  margin: 0;
  font-size: 1.1rem;
  color: #333;
}

.work-synopsis {
  margin: 0.2rem 0 0;
  font-size: 0.9rem;
  color: #666;
  line-height: 1.4;
}

/* right button */
.edit-chapter-btn {
  margin-left: auto;
  background: #f05d37;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 0.6rem 1.2rem;
  cursor: pointer;
}

.edit-chapter-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
}

.edit-chapter-btn:hover:not(:disabled) {
  background: #d35445;
}

/* ---------- 最新评论 ---------- */
.comments-section {
  margin-top: 1.5rem;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  padding: 1rem;
}

.comments-title {
  margin: 0 0 0.6rem;
  font-size: 1.3rem;
  color: #a8412a;
}

.comments-scroll {
  max-height: 180px;
  overflow-y: auto;
  border: 1px solid #eee;
  border-radius: 4px;
  padding: 0.6rem;
}

.comments-scroll ul {
  margin: 0;
  padding: 0;
  list-style: disc inside;
}

.cmt-date {
  font-size: 0.8rem;
  color: #777;
  margin-left: 0.4rem;
}
</style>
